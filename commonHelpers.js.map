{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/main.js","../src/js/pixabay-api.js"],"sourcesContent":["import getImage from \"./pixabay-api\";\n\nexport default createMarcupGallery;\n\nfunction createMarcupGallery(images) {\n  return images.map((element) => \n        `<li class=\"gallery-item\">\n          <div class=\"gallery-image-tumb\">\n            <a class=\"gallery-link\" href=\"${element.largeImageURL}\">\n                <img class=\"gallery-image\" src=\"${element.webformatURL}\" alt=\"${element.tags}\" />\n            </a>\n          </div>\n            <ul class=\"image-info\">\n              <li class=\"image-info-item\">\n                <h4 class=\"image-info-item-title\">Likes</h4>\n                <p class=\"image-info-item-text\">${element.likes}</p>\n              </li>\n              <li class=\"image-info-item\">\n                <h4 class=\"image-info-item-title\">Views</h4>\n                <p class=\"image-info-item-text\">${element.views}</p>\n              </li>\n              <li class=\"image-info-item\">\n                <h4 class=\"image-info-item-title\">Comments</h4>\n                <p class=\"image-info-item-text\">${element.comments}</p>\n              </li>\n              <li class=\"image-info-item\">\n                <h4 class=\"image-info-item-title\">Downloads</h4>\n                <p class=\"image-info-item-text\">${element.downloads}</p>\n              </li>\n            </ul>\n        </li>`).join('');\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport createMarcupGallery from './js/render-functions';\nimport getImage from './js/pixabay-api';\n\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.load-btn');\n\nlet query;\nexport let currentPage = 1;\nexport let maxPage;\nexport const perPage = 15;\n\nfunction showLoader() {\n loader.classList.remove('hidden');\n}\nfunction hideLoader() {\n  loader.classList.add('hidden');\n}\nexport function showLoadBtn() {\n  loadBtn.classList.remove('hidden');\n}\nexport function hideLoadBtn() {\n  loadBtn.classList.add('hidden');\n}\n\n\nconst lightbox = new SimpleLightbox('.gallery a',\n    {\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n\nfunction showMessageError() {\n    iziToast.error({\n    \n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n        maxWidth: '432px',\n        position: 'topRight',\n        messageSize: 16,\n        backgroundColor: '#ef4040',\n        titleColor: '#FFFFFF',\n        messageColor: '#FFFFFF',\n        theme: 'dark',\n    }); \n}\n\nfunction showError(message) {\n  iziToast.error({\n    title: 'Error',\n    message,\n  });\n}\n\n\nform.addEventListener('submit', async event => {\n    event.preventDefault();\n    const query = event.target.elements.search.value.trim();\n    \n    if (query) {\n         currentPage = 1;\n        showLoader()\n        form.reset();\n        gallery.innerHTML = '';\n        lightbox.refresh();\n      \n        try {\n            const data = await getImage(query, currentPage);\n            maxPage = Math.ceil(data.totalHits / perPage);\n            \n            if (data.hits.length) {\n                gallery.innerHTML = createMarcupGallery(data.hits);\n                lightbox.refresh();\n            } else {\n                showMessageError()\n            }\n        }\n        catch (error) {\n            console.log(error);\n        }\n        hideLoader();\n        // form.reset();\n        updateBtnStatus();\n    }\n     lightbox.refresh();\n})\n\n\n\nloadBtn.addEventListener('click', async () => {\n  currentPage++;\n  hideLoadBtn();\n    showLoader();\n  try {\n    const data = await getImage(query, currentPage);\n      const markup = createMarcupGallery(data.hits);\n      gallery.insertAdjacentHTML('beforeend', markup);\n     skipOldElement();\n  } catch {\n    console.log('error');\n  }\n  hideLoader();\n  updateBtnStatus();;\n});\n\n\nfunction skipOldElement() {\n  const liElem = gallery.children[0];\n  const height = liElem.getBoundingClientRect().height;\n\n  scrollBy({\n    top: height * 3,\n    behavior: 'smooth',\n  });\n}\n\n\nfunction updateBtnStatus() {\n  if (currentPage >= maxPage) {\n    hideLoadBtn();\n\n    if (maxPage) {\n      iziToast.info({\n        title: 'The End!',\n        message: 'End of collection!',\n      });\n    }\n  } else {\n    showLoadBtn();\n  }\n}\n\n\n\n\n\n\n\n\n","export default getImage;\nimport axios from 'axios';\nimport { perPage } from '../main';\n axios.defaults.baseURL = 'https://pixabay.com/api/';\n\nasync function getImage(query, currentPage) {\n\n    const params = {\n    key: '44666739-d0cf1ddb18f9d30146fa54081',\n    q: query,\n    page: currentPage,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: perPage,\n    order: 'popular',\n  }; \n    const result = await axios.get('', { params });\n    return result.data;\n}\n\n\n\n// export default getImage;\n\n// function getImage(image) {\n//     const API_KEY = '44666739-d0cf1ddb18f9d30146fa54081';\n//     const BASE_URL = 'https://pixabay.com/api/';\n//     const searchParams = new URLSearchParams({\n//     key: API_KEY,\n//     q: image,\n//     image_type: \"photo\",\n//     orientation: \"horizontal\",\n//     safesearch: \"true\",\n//     });\n//     console.log(searchParams.toString());\n//     return fetch(`${BASE_URL}?${searchParams}`)\n//      .then(resp => resp.json())\n//         // .then((resp) => {\n//         //     if (!resp.ok) {\n//         //         throw new Error(resp.statusText);\n//         //     }\n//         //     return resp.json();\n//         // })\n//         // .cath(err => { console.log(err) });\n// }\n\n\n\n"],"names":["createMarcupGallery","images","element","form","gallery","loader","loadBtn","query","currentPage","maxPage","perPage","showLoader","hideLoader","showLoadBtn","hideLoadBtn","lightbox","SimpleLightbox","showMessageError","iziToast","event","data","getImage","error","updateBtnStatus","markup","skipOldElement","height","axios","params"],"mappings":"owBAIA,SAASA,EAAoBC,EAAQ,CACnC,OAAOA,EAAO,IAAKC,GACb;AAAA;AAAA,4CAEoCA,EAAQ,aAAa;AAAA,kDACfA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDAM1CA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,kDAIbA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,kDAIbA,EAAQ,QAAQ;AAAA;AAAA;AAAA;AAAA,kDAIhBA,EAAQ,SAAS;AAAA;AAAA;AAAA,cAGrD,EAAE,KAAK,EAAE,CACvB,CCvBA,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,WAAW,EAElD,IAAIC,EACOC,EAAc,EACdC,EACJ,MAAMC,EAAU,GAEvB,SAASC,GAAa,CACrBN,EAAO,UAAU,OAAO,QAAQ,CACjC,CACA,SAASO,GAAa,CACpBP,EAAO,UAAU,IAAI,QAAQ,CAC/B,CACO,SAASQ,GAAc,CAC5BP,EAAQ,UAAU,OAAO,QAAQ,CACnC,CACO,SAASQ,GAAc,CAC5BR,EAAQ,UAAU,IAAI,QAAQ,CAChC,CAGA,MAAMS,EAAW,IAAIC,EAAe,aAChC,CACI,aAAc,MACd,aAAc,GACtB,CAAK,EAEL,SAASC,GAAmB,CACxBC,EAAS,MAAM,CAEX,QAAS,2EACT,SAAU,QACV,SAAU,WACV,YAAa,GACb,gBAAiB,UACjB,WAAY,UACZ,aAAc,UACd,MAAO,MACf,CAAK,CACL,CAUAf,EAAK,iBAAiB,SAAU,MAAMgB,GAAS,CAC3CA,EAAM,eAAc,EACpB,MAAMZ,EAAQY,EAAM,OAAO,SAAS,OAAO,MAAM,OAEjD,GAAIZ,EAAO,CACNC,EAAc,EACfG,EAAY,EACZR,EAAK,MAAK,EACVC,EAAQ,UAAY,GACpBW,EAAS,QAAO,EAEhB,GAAI,CACA,MAAMK,EAAO,MAAMC,EAASd,EAAOC,CAAW,EAC9CC,EAAU,KAAK,KAAKW,EAAK,UAAYV,CAAO,EAExCU,EAAK,KAAK,QACVhB,EAAQ,UAAYJ,EAAoBoB,EAAK,IAAI,EACjDL,EAAS,QAAO,GAEhBE,EAAkB,CAEzB,OACMK,EAAO,CACV,QAAQ,IAAIA,CAAK,CACpB,CACDV,IAEAW,GACH,CACAR,EAAS,QAAO,CACrB,CAAC,EAIDT,EAAQ,iBAAiB,QAAS,SAAY,CAC5CE,IACAM,IACEH,IACF,GAAI,CACF,MAAMS,EAAO,MAAMC,EAASd,EAAOC,CAAW,EACtCgB,EAASxB,EAAoBoB,EAAK,IAAI,EAC5ChB,EAAQ,mBAAmB,YAAaoB,CAAM,EAC/CC,GACL,MAAU,CACN,QAAQ,IAAI,OAAO,CACpB,CACDb,IACAW,EAAe,CACjB,CAAC,EAGD,SAASE,GAAiB,CAExB,MAAMC,EADStB,EAAQ,SAAS,CAAC,EACX,sBAAqB,EAAG,OAE9C,SAAS,CACP,IAAKsB,EAAS,EACd,SAAU,QACd,CAAG,CACH,CAGA,SAASH,GAAkB,CACrBf,GAAeC,GACjBK,IAEIL,GACFS,EAAS,KAAK,CACZ,MAAO,WACP,QAAS,oBACjB,CAAO,GAGHL,GAEJ,CCpICc,EAAM,SAAS,QAAU,2BAE1B,eAAeN,EAASd,EAAOC,EAAa,CAExC,MAAMoB,EAAS,CACf,IAAK,qCACL,EAAGrB,EACH,KAAMC,EACN,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUE,EACV,MAAO,SACX,EAEI,OADe,MAAMiB,EAAM,IAAI,GAAI,CAAE,OAAAC,CAAM,CAAE,GAC/B,IAClB"}